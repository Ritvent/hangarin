{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="row">
  <div class="col-6 col-md-3 mb-3 mb-md-4">
    <div class="card bg-dark text-light">
      <div class="card-body d-flex flex-column align-items-start justify-content-between">
        <div class="d-flex w-100 justify-content-between align-items-center">
          <h3 class="mb-0">{{ total_tasks }}</h3>
          <div class="icon icon-box-secondary">
            <span class="mdi mdi-format-list-checks icon-item"></span>
          </div>
        </div>
        <h6 class="text-muted font-weight-normal mt-3">Total Tasks</h6>
      </div>
    </div>
  </div>

  <div class="col-6 col-md-3 mb-3 mb-md-4">
    <div class="card bg-dark text-light">
      <div class="card-body d-flex flex-column align-items-start justify-content-between">
        <div class="d-flex w-100 justify-content-between align-items-center">
          <h3 class="mb-0">{{ completed_tasks }}</h3>
          <div class="icon icon-box-success">
            <span class="mdi mdi-check-circle icon-item"></span>
          </div>
        </div>
        <h6 class="text-muted font-weight-normal mt-3">Completed</h6>
      </div>
    </div>
  </div>

  <div class="col-6 col-md-3 mb-3 mb-md-4">
    <div class="card bg-dark text-light">
      <div class="card-body d-flex flex-column align-items-start justify-content-between">
        <div class="d-flex w-100 justify-content-between align-items-center">
          <h3 class="mb-0">{{ pending_tasks }}</h3>
          <div class="icon icon-box-warning">
            <span class="mdi mdi-clock icon-item"></span>
          </div>
        </div>
        <h6 class="text-muted font-weight-normal mt-3">Pending</h6>
      </div>
    </div>
  </div>

  <div class="col-6 col-md-3 mb-3 mb-md-4">
    <div class="card bg-dark text-light">
      <div class="card-body d-flex flex-column align-items-start justify-content-between">
        <div class="d-flex w-100 justify-content-between align-items-center">
          <h3 class="mb-0">{{ overdue|default:0 }}</h3>
          <div class="icon icon-box-danger">
            <span class="mdi mdi-alert-circle icon-item"></span>
          </div>
        </div>
        <h6 class="text-muted font-weight-normal mt-3">Overdue</h6>
      </div>
    </div>
  </div>
</div>
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Bordered table</h4>
                    <p class="card-description"> Add class <code>.table-bordered</code>
                    </p>
                    <div class="table-responsive">
                      <table class="table table-bordered" style="table-layout: fixed; width: 100%;">
                        <thead>
                          <tr>
                                <th style="width: 40%">
                                  <a href="{{ header_links.task }}">Task
                                    {% if primary_col == 'task' %}
                                      {% if primary_dir == 'asc' %} ▲ {% else %} ▼ {% endif %}
                                    {% endif %}
                                  </a>
                                </th>
                                <th style="width: 20%">
                                  <a href="{{ header_links.category }}">Category
                                    {% if primary_col == 'category' %}
                                      {% if primary_dir == 'asc' %} ▲ {% else %} ▼ {% endif %}
                                    {% endif %}
                                  </a>
                                </th>
                                <th style="width: 25%">
                                  <a href="{{ header_links.progress }}">Progress
                                    {% if primary_col == 'progress' %}
                                      {% if primary_dir == 'asc' %} ▲ {% else %} ▼ {% endif %}
                                    {% endif %}
                                  </a>
                                </th>
                                <th style="width: 15%">
                                  <a href="{{ header_links.deadline }}">Deadline
                                    {% if primary_col == 'deadline' %}
                                      {% if primary_dir == 'asc' %} ▲ {% else %} ▼ {% endif %}
                                    {% endif %}
                                  </a>
                                </th>
                              </tr>
                        </thead>
                        <tbody>
                        {% if task_rows %}
                          {% for row in task_rows %}
                            <tr>
                              <td style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{ row.task.title }}</td>
                              <td>{{ row.task.category.category_name }}</td>
                              <td>
                                <div class="progress">
                                  <div class="progress-bar {% if row.progress == 100 %}bg-success{% elif row.progress >= 50 %}bg-warning{% else %}bg-danger{% endif %}" role="progressbar" style="width: {{ row.progress }}%" aria-valuenow="{{ row.progress }}" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                              </td>
                              <td>{% if row.task.deadline %}{{ row.task.deadline|date:"M d, Y" }}{% endif %}</td>
                            </tr>
                          {% endfor %}
                        {% else %}
                          <!-- fallback sample rows if no tasks present -->
                          <tr>
                            <td> Herman Beck </td>
                            <td>
                              <div class="progress">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                              </div>
                            </td>
                            <td> May 15, 2015 </td>
                          </tr>
                        {% endif %}
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            

            
                    
                   


{% endblock %}